<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Админка - Записи по дням</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="/static/style/admin.css">
</head>
<body>
    <div class="admin-container">
        <div class="admin-header">
            <h1><i class="bi bi-calendar-check"></i> Записи на консультацию</h1>
            <div class="header-buttons">
                <a href="/slots" class="btn slots-btn">
                    <i class="bi bi-clock"></i> Слоты
                </a>
                <a href="/admin/event/archive" class="btn archive-btn">
                    <i class="bi bi-archive"></i> Архив
                </a>
                <a href="/employees" class="btn archive-btn">
                    <i class="bi bi-person"></i> Сотрудники
                </a>
            </div>
        </div>
        
        {{range .}}
        <div class="day-section">
            <div class="day-header">
                <span>{{.Date}}</span>
                <span class="day-count">{{len .Forms}} записей</span>
            </div>
            
            {{if .Forms}}
                <!-- Индивидуальные консультации -->
                <div class="consultation-type">
                    <h3 class="consultation-title">
                        <i class="bi bi-person"></i> Индивидуальные консультации 
                        <span class="day-count">{{.CountInd}} записей</span>
                    </h3>
                    <div class="cards-row">
                        {{range .Forms}}
                            {{if eq .TypeEvent "Индивидуальная консультация"}}
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="card-title"><i class="bi bi-person"></i> {{.FIO}}</h5>
                                    <h6 class="card-subtitle"><i class="bi bi-briefcase"></i> {{.Position}}</h6>
                                    <div class="card-text">
                                        <p><strong><i class="bi bi-clock"></i> Время:</strong> {{.Time}}</p>
                                        <p><strong><i class="bi bi-telephone"></i> Телефон:</strong> {{.Phone}}</p>
                                        <!-- <p><strong><i class="bi bi-fonts"></i> Тип:</strong> {{.TypeEvent}}</p> -->
                                        {{if .Psyholog}}
                                        <p><strong><i class="bi bi-person-heart"></i> Сотрудник:</strong> {{.Psyholog}}</p>
                                        {{end}}
                                        {{if .Comment}}
                                        <p><strong><i class="bi bi-chat-left-text"></i> Комментарий:</strong> {{.Comment}}</p>
                                        {{end}}
                                    </div>
                                    <div class="card-actions">
                                        <button class="btn btn-action btn-cancel" onclick="cancelEvent(this)" data-event-id="{{.ID}}">
                                            <i class="bi bi-x-circle"></i> Отменить
                                        </button>
                                    </div>
                                </div>
                            </div>
                            {{end}}
                        {{end}}
                    </div>
                </div>
                
                <!-- Комната психологической разгрузки -->
                <div class="consultation-type">
                    <h3 class="consultation-title">
                        <i class="bi bi-people"></i> Комната психологической разгрузки
                        <span class="day-count">{{.CountRoom}} записей</span>
                    </h3>
                    <div class="cards-row">
                        {{range .Forms}}
                            {{if ne .TypeEvent "Индивидуальная консультация"}}
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="card-title"><i class="bi bi-person"></i> {{.FIO}}</h5>
                                    <h6 class="card-subtitle"><i class="bi bi-briefcase"></i> {{.Position}}</h6>
                                    <div class="card-text">
                                        <p><strong><i class="bi bi-clock"></i> Время:</strong> {{.Time}}</p>
                                        <p><strong><i class="bi bi-telephone"></i> Телефон:</strong> {{.Phone}}</p>
                                        <!-- <p><strong><i class="bi bi-fonts"></i> Тип:</strong> {{.TypeEvent}}</p> -->
                                        {{if .Comment}}
                                        <p><strong><i class="bi bi-chat-left-text"></i> Комментарий:</strong> {{.Comment}}</p>
                                        {{end}}
                                    </div>
                                    <div class="card-actions">
                                        <button class="btn btn-action btn-cancel" onclick="cancelEvent(this)" data-event-id="{{.ID}}">
                                            <i class="bi bi-x-circle"></i> Отменить
                                        </button>
                                    </div>
                                </div>
                            </div>
                            {{end}}
                        {{end}}
                    </div>
                </div>
            {{else}}
                <div class="empty-day">
                    <i class="bi bi-calendar-x" style="font-size: 2rem;"></i>
                    <p>Нет записей на эту дату</p>
                </div>
            {{end}}
        </div>
        {{end}}
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/static/script/admin.js"></script>
</body>
</html>